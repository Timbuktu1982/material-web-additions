import {Meta} from '@storybook/addon-docs';

import './introduction.scss';
import components, {Component} from './components.ts';

import '../packages/layout-grid/mwa-layout-grid';
import '../packages/card/mwa-card';
import '../packages/card/mwa-card-primary-action';
import '../packages/card/mwa-card-media';
import '@material/mwc-icon-button';
import {linkTo} from '@storybook/addon-links';

<Meta title="Introduction" parameters={{previewTabs: {canvas: {hidden: true}}}} />

# Material Web Additions
[![GitHub issues by-label](https://img.shields.io/github/issues-raw/maicol07/material-web-additions/Type:%20Bug)](https://github.com/maicol07/material-web-additions/issues?q=is%3Aissue+is%3Aopen+label%3A%22Type%3A+Bug%22)

> IMPORTANT: Material Web & Material Web Additions are a work in progress and subject to major changes until 1.0 release.

Material Web Additions is a collection of additional components to [Material Web](https://github.com/material-components/material-web)
components: Googleâ€™s UI toolkit for building beautiful, accessible web applications. Material Web & Material Web
Additions are implemented as a collection
of [web components](https://developer.mozilla.org/en-US/docs/Web/Web_Components).

The Material team is currently working on [Material You](https://material.io/blog/announcing-material-you) (Material
Design 3) support for Material Web components.

Developers using this library should expect some big changes after Material Web v1 has been released (when the Material
team finished their work on Material You).

A few notable changes you should expect:

- UX changes as we adopt the new designs (production users will definitely want to pin to an appropriate release, not
mainline)
- A single npm package (`@maicol07/md-web-additions`)
- Simplification of tag name prefixes to `md-` (CSS custom properties will be `--md-`)
- Components with variant attributes will be split into several variant components:

Example: `mwa-card` will be split into `md-card`, `md-outlined-card`, etc

[Contributing Guide](#Contributing)

## Components
The components in this repo have been originally developed by other authors, then abandoned. I've decided to adopt and
rework them under a unique, bigger package.

<mwa-layout-grid>
    {
        Object.entries(components).map(([slug, details]) => {
            /** @type {Component} */
            const component = details;
            return (
                <mwa-card key={slug} outlined>
                    <mwa-card-primary-action onClick={component.released ? linkTo(component.docsLink ?? component.name) : undefined} disabled={!component.released}>
                        <mwa-card-media
                            style={{'--mdc-card-media-background-image': `url("${component.backgroundImage}")`}}></mwa-card-media>
                        <div className="component-card__header">
                            <div className="components-card-header">
                                <div className="demo-card__title components-card-header-title">
                                    <span className="components-card-header-title-text">
                                        {component.name}
                                        <code>mwa-{slug}</code></span>
                                    {component.released && (
                                        <a target="_blank" href={`https://www.npmjs.com/package/@maicol07/mwa-${slug}`}>
                                            <img src={`https://img.shields.io/npm/v/@maicol07/mwa-${slug}.svg`}
                                                 alt="Published on NPM"/>
                                        </a>
                                    )}
                                </div>
                                <div className="demo-card__subtitle">
                                    <span className="components-card-subtitle">{component.description}</span>
                                    {!component.released && (
                                        <>
                                            <br/><br/>
                                            <small className="components-card-status">Status: <a target="_blank" href={component.status.link}>{component.status.text}</a> {component.status.afterText}</small>
                                        </>
                                    )}
                                </div>
                            </div>
                        </div>
                    </mwa-card-primary-action>
                    {component.actions && Object.entries(component.actions).map(([id, action]) => (
                        <a key={id} href={action.link} target="_blank" className="mwa-card-action" title={action.title}
                           target="_blank" slot="icon">
                            <mwc-icon-button icon={action.icon} aria-label={action.title}/>
                        </a>
                    ))}
                </mwa-card>
            );
        })
    }
</mwa-layout-grid>
<br/>

## Quick start

#### 1) Install
Install a component from NPM:

```sh
npm install @maicol07/mwa-layout-grid
```

#### 2) Write HTML and JavaScript
Import the component's JavaScript module, use the component in your HTML, and control it with JavaScript, just like you
would with a built-in element such as `<button>`:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My Example App</title>

    <!-- Your application may load the Roboto and Material Icons fonts. -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">
  </head>
  <body>
    <!-- Use Web Components in your HTML like regular built-in elements. -->
    <mwa-layout-grid id="myGrid">
        <p>I'm on the first column</p>
        <button> I'm in the middle</button>
        <input value="I'm in the last column"/>
    </mwa-layout-grid>

    <!-- Material Web uses standard JavaScript modules. -->
    <script type="module">
      // Importing this module registers <mwc-button> as an element that you
      // can use in this page.
      //
      // Note this import is a bare module specifier, so it must be converted
      // to a path using a server such as Web Dev Server.
      import '@maicol07/mwa-layout-grid';

      // Standard DOM APIs work with Web Components just like they do for
      // built-in elements.
      const grid = document.querySelector('#myGrid');
      button.addEventListener('onmouseenter', () => {
        alert('You entered the layout grid!');
      });
    </script>
  </body>
</html>
```

#### 3) Serve
Serve your HTML with any server or build process that supports *bare module specifier resolution* (see next section):

```sh
npm install --save-dev @web/dev-server
npx web-dev-server --node-resolve
```

## Bare module specifiers
Material Web & Material Web Additions are published as
standard [JavaScript modules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules) that use *bare
module specifiers*. Bare module specifiers are not yet supported by browsers, so it is necessary to use a tool that
transforms them to a *path* (for example from `@maicol07/mwa-layout-grid`
to `./node_modules/@maicol07/mwa-layout-grid/mwa-layout-grid.js`).

Two great choices for tools that do this are:

- During local development, use Modern Web's [`Web Dev Server`](https://modern-web.dev/docs/dev-server/overview/) with
the `--node-resolve` flag.
- For your production deployment, build your application with [Rollup](https://rollupjs.org/guide/en/) using
the [`rollup-plugin-node-resolve`](https://github.com/rollup/rollup-plugin-node-resolve) plugin or similar.

## Fonts
Most applications should include the following tags in their main HTML file to ensure that text and icons render
correctly:

```html
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">
```

Material Web & Material Web Additions default to using the [Roboto](https://fonts.google.com/specimen/Roboto) font for
text, and the [Material Icons](https://google.github.io/material-design-icons/) font for icons. These fonts are *not*
automatically loaded, so it is the application's responsiblity to ensure that they are loaded.

Note that if you load the Material Icons font in a different way to the recommendation shown above, be sure to
include [`font-display: block`](https://google.github.io/material-design-icons/) in your `@font-face` CSS rule. This
prevents icons from initially displaying their raw *ligature* text before the font has loaded. The `<link>` tag
recommended above automaticaly handles this setting.
